(function(e){function t(t){for(var r,i,a=t[0],u=t[1],c=t[2],d=0,p=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"3c61":function(e,t,n){},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=s,e.exports=o,o.id="4678"},5190:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("user-msg"),n("app-header"),n("aside",{staticClass:"auth-actions"},[e.loggedUser?n("div",[n("router-link",{attrs:{to:e.isAdmin?"/users":"/profile"}},[e._v(e._s(e.username))]),n("button",{on:{click:e.logout}},[e._v("Logout")])],1):n("router-link",{attrs:{to:"/auth"}},[e._v("Login")])],1),n("router-view")],1)},s=[],i=(n("fb6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.alive?n("div",{staticClass:"alert",class:e.alertClass},[e._v(" "+e._s(e.msg.txt)+" ")]):e._e()}),a=[],u="show-msg",c=new r["default"];function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";c.$emit(u,{txt:e,type:t})}var d={created:function(){var e=this;c.$on(u,(function(t){e.msg=t;var n=t.delay||2e3;e.alive=!0,setTimeout((function(){e.alive=!1}),n)}))},data:function(){return{alive:!1,msg:null}},computed:{alertClass:function(){if(this.msg)return"alert-".concat(this.msg.type)}}},p=d,f=(n("87cd"),n("2877")),m=Object(f["a"])(p,i,a,!1,null,null,null),v=m.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"main-nav"},[n("router-link",{attrs:{to:"/toy"}},[e._v("Toys")]),e._v(" | "),n("router-link",{attrs:{to:"/dashboard"}},[e._v("Dashboard")]),e._v(" | "),n("router-link",{attrs:{to:"/about"}},[e._v("About")])],1)},h=[],g={},b=g,w=Object(f["a"])(b,y,h,!1,null,null,null),j=w.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"auth"},[e.isSignedUp?n("form",{staticClass:"login-form",on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[n("h2",[e._v("Welcome Back âœ”")]),n("label",{attrs:{for:""}},[e._v("Username: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{type:"text"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}})]),n("label",{attrs:{for:""}},[e._v("Password: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),n("button",[e._v("Login")]),n("p",[e._v("Don't have an account? "),n("span",{on:{click:e.switchForm}},[e._v("Create One")])])]):n("form",{staticClass:"signup-form",on:{submit:function(t){return t.preventDefault(),e.signup.apply(null,arguments)}}},[n("h2",[e._v("Signup Form")]),n("label",{attrs:{for:""}},[e._v("Username: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.username,expression:"newUser.username"}],attrs:{type:"text"},domProps:{value:e.newUser.username},on:{input:function(t){t.target.composing||e.$set(e.newUser,"username",t.target.value)}}})]),n("label",{attrs:{for:""}},[e._v("Password: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.password,expression:"newUser.password"}],attrs:{type:"password"},domProps:{value:e.newUser.password},on:{input:function(t){t.target.composing||e.$set(e.newUser,"password",t.target.value)}}})]),n("label",{attrs:{for:""}},[e._v("Full name: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.fullName,expression:"newUser.fullName"}],attrs:{type:"text"},domProps:{value:e.newUser.fullName},on:{input:function(t){t.target.composing||e.$set(e.newUser,"fullName",t.target.value)}}})]),n("label",{attrs:{for:""}},[e._v("Email: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.email,expression:"newUser.email"}],attrs:{type:"email"},domProps:{value:e.newUser.email},on:{input:function(t){t.target.composing||e.$set(e.newUser,"email",t.target.value)}}})]),n("button",[e._v("Sign up")]),n("p",[e._v("Already Signed Up? "),n("span",{on:{click:e.switchForm}},[e._v("Back to Login")])])])])},k=[],x={data:function(){return{isSignedUp:!0,user:{username:"",password:null},newUser:{username:"",password:null,email:"",fullName:""}}},methods:{login:function(){var e=this;this.$store.dispatch({type:"login",user:this.user}).then((function(){e.$router.push("/toy")}))},signup:function(){var e=this;this.$store.dispatch({type:"signup",user:this.newUser}).then((function(){e.$router.push("/toy")}))},switchForm:function(){this.isSignedUp=!this.isSignedUp}}},T=x,$=Object(f["a"])(T,_,k,!1,null,null,null),O=$.exports,S={methods:{logout:function(){this.$store.dispatch({type:"logout"}).then((function(){}))}},computed:{username:function(){return this.$store.getters.username[0].toUpperCase()+this.$store.getters.username.slice(1)||"Guest"},isAdmin:function(){return this.$store.getters.isAdmin},loggedUser:function(){return this.$store.getters.user}},components:{userMsg:v,appHeader:j,userAuth:O}},C=S,R=Object(f["a"])(C,o,s,!1,null,null,null),E=R.exports,P=n("8c4f"),I=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},L=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),r("h2",[e._v("Welcome to my MisterToy"),r("br"),e._v(" Vue.js app")])])}],A={name:"Home"},U=A,N=Object(f["a"])(U,I,L,!1,null,null,null),B=N.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"user-profile"},[n("p",[e._v("PRINT TEST")]),e.reviews?n("review-list",{attrs:{reviews:e.reviews},on:{removeReview:function(t){return e.removeReview(t)}}}):e._e()],1)},z=[],F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("h2",[e._v("Review List")]),n("ul",[e._l(e.reviews,(function(t,r){return[n("review-preview",{key:r,attrs:{review:t},on:{removeReview:function(t){return e.$emit("removeReview",t)}}})]}))],2)])},D=[],q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.review?n("li",{staticClass:"review-preview"},[n("p",[e._v(e._s(e.review.byUser.fullName[0].toUpperCase()+e.review.byUser.fullName.slice(1))+" -")]),n("p",[e._v("Toy: "+e._s(e.review.aboutToy.toyName[0].toUpperCase()+e.review.aboutToy.toyName.slice(1)))]),n("p",[e._v("Rating: "+e._s(e.review.rating))]),n("p",[e._v("Text: "+e._s(e.review.txt))]),e.isAdmin?n("button",{on:{click:function(t){return e.$emit("removeReview",e.review._id)}}},[e._v("âœ–")]):e._e()]):e._e()},J=[],G={props:["review"],created:function(){console.log(this.review)},computed:{isAdmin:function(){return this.$store.getters.isAdmin}}},W=G,H=Object(f["a"])(W,q,J,!1,null,null,null),V=H.exports,Q={props:["reviews"],components:{reviewPreview:V}},Y=Q,Z=Object(f["a"])(Y,F,D,!1,null,null,null),K=Z.exports,X={methods:{removeReview:function(e){this.$store.dispatch({type:"removeReview",reviewId:e})}},computed:{data:function(){return{}},reviews:function(){return this.$store.getters.reviews},userId:function(){return this.$store.getters.user._id}},watch:{userId:{handler:function(){this.$store.dispatch({type:"loadReviews",filterBy:{byUserId:this.userId}})},immediate:!0}},components:{reviewList:K}},ee=X,te=Object(f["a"])(ee,M,z,!1,null,null,null),ne=te.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"toy-app main-layout"},[n("router-view"),n("toy-filter",{attrs:{toyLabels:e.toyLabels},on:{filtered:e.setFilter}}),e.isAdmin?n("router-link",{staticClass:"btn btn-add",attrs:{to:"/toy/edit"}},[e._v("Add Toy +")]):e._e(),n("toy-list",{attrs:{toys:e.toysToShow},on:{removed:e.removeToy}}),e.isLoading?n("p",[e._v("Loading...")]):e._e()],1)},oe=[],se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{staticClass:"toy-filter"},[n("div",{staticClass:"search"},[n("label",[e._v("ðŸ” "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.toyName,expression:"filterBy.toyName"}],attrs:{type:"search",placeholder:"Search Toys"},domProps:{value:e.filterBy.toyName},on:{input:[function(t){t.target.composing||e.$set(e.filterBy,"toyName",t.target.value)},e.changeFilter]}})]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.status,expression:"filterBy.status"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.filterBy,"status",t.target.multiple?n:n[0])},e.changeFilter]}},[n("option",{attrs:{value:"all"}},[e._v("All")]),n("option",{attrs:{value:"instock"}},[e._v("In-Stock")]),n("option",{attrs:{value:"missing"}},[e._v("Missing")])])]),n("el-select",{attrs:{multiple:"",placeholder:"Select Labels"},on:{change:e.changeFilter},model:{value:e.filterBy.labels,callback:function(t){e.$set(e.filterBy,"labels",t)},expression:"filterBy.labels"}},e._l(e.toyLabels,(function(e,t){return n("el-option",{key:t,attrs:{label:e,value:e}})})),1),n("div",{staticClass:"sort"},[n("p",[e._v("Sort by:")]),n("button",{on:{click:function(t){return e.changeFilter("name")}}},[e._v("Name")]),n("button",{on:{click:function(t){return e.changeFilter("price")}}},[e._v("Price")]),n("button",{on:{click:function(t){return e.changeFilter("date")}}},[e._v("Date")])])],1)},ie=[],ae={props:["toyLabels"],data:function(){return{filterBy:{toyName:"",status:"all",labels:[],sortBy:""}}},methods:{changeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.filterBy.sortBy=e,this.$emit("filtered",this.filterBy)}}},ue=ae,ce=Object(f["a"])(ue,se,ie,!1,null,null,null),le=ce.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"toy-list toyd-grid"},[e._l(e.toys,(function(t){return[n("toy-preview",{key:t._id,attrs:{toy:t},on:{removed:function(n){return e.$emit("removed",t)}}})]}))],2)},pe=[],fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"toy-card",on:{click:function(t){return e.toydClick(e.toy._id)}}},[n("img",{attrs:{src:e.toy.imgUrl,alt:""}}),n("div",[n("p",[e._v(e._s(e.toy.name))]),n("p",[e._v("$"+e._s(e.toy.price))]),n("div",{staticClass:"labels"},e._l(e.labels,(function(t,r){return n("p",{key:r},[e._v(e._s(t))])})),0),e.isAdmin?n("div",{staticClass:"btns-box"},[n("button",{staticClass:"btn btn-edit",on:{click:function(t){return t.stopPropagation(),e.editClick(e.toy._id)}}},[e._v("ðŸ–Š")]),n("button",{staticClass:"btn btn-remove",on:{click:function(t){return t.stopPropagation(),e.$emit("removed",e.toy)}}},[e._v("âœ–")])]):e._e()])])},me=[],ve={props:["toy"],methods:{toydClick:function(e){this.$router.push("/toy/".concat(e))},editClick:function(e){this.$router.push("/toy/edit/".concat(e)),window.scrollTo(0,0)}},computed:{isAdmin:function(){return this.$store.getters.isAdmin},labels:function(){return this.toy.labels}}},ye=ve,he=Object(f["a"])(ye,fe,me,!1,null,null,null),ge=he.exports,be={props:["toys"],components:{toyPreview:ge}},we=be,je=Object(f["a"])(we,de,pe,!1,null,null,null),_e=je.exports,ke={name:"toyApp",data:function(){return{toys:null}},created:function(){this.$store.commit({type:"setMsg",userMsg:"Test"})},methods:{removeToy:function(e){this.$store.dispatch({type:"removeToy",toy:e}).then((function(){l("Toy removed")}))},setFilter:function(e){this.$store.dispatch({type:"setFilter",filterBy:e})}},computed:{toysToShow:function(){return this.$store.getters.filteredToys},toyLabels:function(){return this.$store.getters.toyLabels},isLoading:function(){return this.$store.getters.isLoading},isAdmin:function(){return this.$store.getters.isAdmin}},components:{toyFilter:le,toyList:_e}},xe=ke,Te=Object(f["a"])(xe,re,oe,!1,null,null,null),$e=Te.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.toy?n("section",{staticClass:"toy-edit"},[n("router-link",{attrs:{to:"/toy"}},[e._v("âœ–")]),n("h1",[e._v(e._s(e.editOrAdd)+" Toy")]),n("form",{attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.saveToy.apply(null,arguments)}}},[n("label",{attrs:{for:""}},[e._v("Name: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.toy.name,expression:"toy.name"}],staticClass:"toy-name",attrs:{type:"text"},domProps:{value:e.toy.name},on:{input:function(t){t.target.composing||e.$set(e.toy,"name",t.target.value)}}})]),n("label",{attrs:{for:""}},[e._v("Price: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.toy.price,expression:"toy.price",modifiers:{number:!0}}],staticClass:"toy-price",attrs:{type:"number"},domProps:{value:e.toy.price},on:{input:function(t){t.target.composing||e.$set(e.toy,"price",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),n("input",{attrs:{type:"file"},on:{change:e.uploadImg}}),e.toyLabels?n("el-select",{staticClass:"toy-label",attrs:{multiple:"",placeholder:"Add Labels"},model:{value:e.toy.labels,callback:function(t){e.$set(e.toy,"labels",t)},expression:"toy.labels"}},e._l(e.toyLabels,(function(e,t){return n("el-option",{key:t,attrs:{label:e,value:e}})})),1):e._e(),n("div",{staticClass:"toy-instock"},[n("p",[e._v("In-Stock:")]),n("label",{staticClass:"switch",attrs:{for:"toy-instock"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.toy.inStock,expression:"toy.inStock"}],attrs:{id:"toy-instock",type:"checkbox"},domProps:{checked:Array.isArray(e.toy.inStock)?e._i(e.toy.inStock,null)>-1:e.toy.inStock},on:{change:function(t){var n=e.toy.inStock,r=t.target,o=!!r.checked;if(Array.isArray(n)){var s=null,i=e._i(n,s);r.checked?i<0&&e.$set(e.toy,"inStock",n.concat([s])):i>-1&&e.$set(e.toy,"inStock",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.toy,"inStock",o)}}}),n("span",{staticClass:"slider round"})])]),n("button",{staticClass:"btn btn-save"},[e._v("Save")])],1)],1):e._e()},Se=[],Ce=n("1da1"),Re=(n("96cf"),n("99af"),n("e9c4"),n("bc3a")),Ee=n.n(Re),Pe="/api/",Ie=Ee.a.create({withCredentials:!0}),Le={get:function(e,t){return Ae(e,"GET",t)},post:function(e,t){return Ae(e,"POST",t)},put:function(e,t){return Ae(e,"PUT",t)},delete:function(e,t){return Ae(e,"DELETE",t)}};function Ae(e){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(Ce["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"GET",r=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,Ie({url:"".concat(Pe).concat(t),method:n,data:r,params:"GET"===n?r:null});case 5:return o=e.sent,e.abrupt("return",o.data);case 9:throw e.prev=9,e.t0=e["catch"](2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data:"),r),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(void 0).push("/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),Ue.apply(this,arguments)}var Ne=n("2909"),Be=(n("d3b7"),n("7db0"),n("c740"),n("a434"),{query:Me,get:ze,post:Fe,put:De,remove:qe,postMany:Je});function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=JSON.parse(localStorage.getItem(e))||[];return new Promise((function(e){setTimeout((function(){e(n)}),t)}))}function ze(e,t){return Me(e).then((function(e){return e.find((function(e){return e._id===t}))}))}function Fe(e,t){return t._id=We(),Me(e).then((function(n){return n.push(t),Ge(e,n),t}))}function De(e,t){return Me(e).then((function(n){var r=n.findIndex((function(e){return e._id===t._id}));return n.splice(r,1,t),Ge(e,n),t}))}function qe(e,t){return Me(e).then((function(n){var r=n.findIndex((function(e){return e._id===t}));if(r<0)throw new Error("Unknown Entity ".concat(t));n.splice(r,1),Ge(e,n)}))}function Je(e,t){return Me(e).then((function(n){return n.push.apply(n,Object(Ne["a"])(t)),Ge(e,n),n}))}function Ge(e,t){localStorage.setItem(e,JSON.stringify(t))}function We(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var He="toysDB",Ve=(Qe(),{query:Ze,getById:Xe,remove:tt,save:rt,getEmptyToy:st,getLabels:Ye});function Qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="/api/toy/";return"".concat(t,"/").concat(e)}function Ye(){return["on wheels","box game","art","baby","doll","puzzle","outdoor","battery powered","soldier","adult"]}it();function Ze(){return Ke.apply(this,arguments)}function Ke(){return Ke=Object(Ce["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,Le.get("toy",t);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e["catch"](1),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),Ke.apply(this,arguments)}function Xe(e){return et.apply(this,arguments)}function et(){return et=Object(Ce["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le.get("toy/"+t,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),et.apply(this,arguments)}function tt(e){return nt.apply(this,arguments)}function nt(){return nt=Object(Ce["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le.delete("toy/"+t,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),nt.apply(this,arguments)}function rt(e){return ot.apply(this,arguments)}function ot(){return ot=Object(Ce["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t._id){e.next=6;break}return e.next=3,Le.put("toy",t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Le.post("toy",t);case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)}))),ot.apply(this,arguments)}function st(){return{_id:"",name:"",price:149,labels:"",inStock:!1}}function it(){var e=JSON.parse(localStorage.getItem(He));return e&&e.length||(e=[{_id:"t101",name:"Talking Doll",price:123,labels:["doll","battery powered","baby"],createdAt:1631031801011,inStock:!0},{_id:"t102",name:"Running Soldier",price:179,labels:["soldier","battery powered","outdoor"],createdAt:1631031201011,inStock:!0}]),localStorage.setItem(He,JSON.stringify(e)),e}var at=function(){var e=Object(Ce["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="ep-mister-toy",r="ep-mister-toy",o="https://api.cloudinary.com/v1_1/".concat(r,"/image/upload"),s=new FormData,s.append("file",t),s.append("upload_preset",n),e.prev=6,e.next=9,Ee.a.post(o,s);case 9:return i=e.sent,e.abrupt("return",i.data);case 13:e.prev=13,e.t0=e["catch"](6),console.error("ERROR!",e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),ut={data:function(){return{toy:null}},methods:{uploadImg:function(e){var t=this;return Object(Ce["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,"change"===e.type?r=e.target.files[0]:"drop"===e.type&&(r=e.dataTransfer.files[0]),n.next=4,at(r);case 4:o=n.sent,t.toy.imgUrl=o.url,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log("Error uploading img");case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},saveToy:function(){this.toy._id?this.$store.dispatch({type:"updateToy",toy:this.toy}).then((function(){l("Toy Updated Successfuly")})):(this.$store.dispatch({type:"addToy",toy:this.toy}),l("Toy Added Successfuly")),this.toy=Ve.getEmptyToy(),this.$router.push("/toy")}},computed:{toyLabels:function(){return this.$store.getters.toyLabels},editOrAdd:function(){return this.toy._id?"Edit":"Add"}},watch:{"$route.params":{handler:function(){var e=this,t=this.$route.params.toyId;t?Ve.getById(t).then((function(t){e.toy=t})):this.toy=Ve.getEmptyToy()},immediate:!0,deep:!0}}},ct=ut,lt=Object(f["a"])(ct,Oe,Se,!1,null,null,null),dt=lt.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.toy?n("section",{staticClass:"toy-details"},[n("router-link",{attrs:{to:"/toy"}},[e._v("â¬…Back")]),n("main",[n("h2",[e._v(e._s(e.toy.name[0].toUpperCase()+e.toy.name.slice(1)))]),n("img",{attrs:{src:e.toy.imgUrl,alt:""}})]),n("div",{staticClass:"description"},[n("p",[e._v("Price: $"+e._s(e.toy.price))]),n("p",[e._v("In-Stock: "+e._s(e.toy.inStock?"âœ”":"âŒ"))]),n("p",[e._v("Labels: "+e._s(e.toy.labels))]),n("p",[e._v("Arrival: "+e._s(new Date(Date.now(e.toy._id)).toLocaleDateString()))])]),n("form",{attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.addReview.apply(null,arguments)}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reviewToEdit.txt,expression:"reviewToEdit.txt"}],attrs:{cols:"30",rows:"10"},domProps:{value:e.reviewToEdit.txt},on:{input:function(t){t.target.composing||e.$set(e.reviewToEdit,"txt",t.target.value)}}}),n("p",[e._v("Rating: "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.reviewToEdit.rating,expression:"reviewToEdit.rating"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reviewToEdit,"rating",t.target.multiple?n:n[0])}}},e._l(5,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)]),n("button",[e._v("Add Review")])]),e.user?n("chat"):e._e(),n("review-list",{attrs:{reviews:e.reviews},on:{removeReview:function(t){return e.removeReview(t)}}})],1):e._e()},ft=[],mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isChatOpen?n("div",{staticClass:"chat"},[n("button",{on:{click:function(t){e.isChatOpen=!1}}},[e._v("âœ–")]),n("h2",[e._v("Lets Chat About "+e._s(e.watchedToy))]),n("ul",e._l(e.msgs,(function(t,r){return n("li",{key:r},[n("p",{staticClass:"from"},[e._v(e._s(t.from)+" :")]),n("p",{staticClass:"txt"},[e._v(e._s(t.txt))])])})),0),n("hr"),n("form",{on:{submit:function(t){return t.preventDefault(),e.sendMsg.apply(null,arguments)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.msg.txt,expression:"msg.txt"}],attrs:{type:"text",placeholder:"Your msg"},domProps:{value:e.msg.txt},on:{input:[function(t){t.target.composing||e.$set(e.msg,"txt",t.target.value)},e.checkIsTyping]}}),n("button",[e._v("Send")])])]):n("div",[n("button",{staticClass:"btn btn-chat",on:{click:function(t){e.isChatOpen=!0}}},[e._v("Toy Chat")])])},vt=[],yt=(n("b0c0"),n("4de4"),n("159b"),n("daa8")),ht="toy-watch",gt="toy-updated",bt="review-added",wt="",jt=_t();function _t(){var e=null,t={setup:function(){return Object(Ce["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=Object(yt["a"])(wt);case 1:case"end":return t.stop()}}),t)})))()},on:function(t,n){e.on(t,n)},off:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(n?e.off(t,n):e.removeAllListeners(t))},emit:function(t,n){e.emit(t,n)},terminate:function(){e=null}};return t}window.socketService=jt,jt.setup();var kt,xt,Tt,$t,Ot={data:function(){return{isChatOpen:!1,msg:{from:"",txt:""},msgs:[],topic:"",isTyping:null}},created:function(){this.topic=this.watchedToy,this.msg.from=this.username,jt.setup(),jt.emit("chat topic",this.topic),jt.on("chat addMsg",this.addMsg),jt.on("user typing",this.setIsTyping)},destroyed:function(){jt.off("chat addMsg",this.addMsg),jt.terminate()},computed:{username:function(){return this.$store.getters.username||"Guest"},watchedToy:function(){return this.$store.getters.watchedToy.name[0].toUpperCase()+this.$store.getters.watchedToy.name.slice(1)}},methods:{checkIsTyping:function(){this.msg.txt&&(console.log("user typing"),jt.emit("user typing",this.username))},addMsg:function(e){this.msgs.push(e)},sendMsg:function(){console.log("Sending",this.msg),jt.emit("chat newMsg",this.msg),this.msg.txt=""},changeTopic:function(){jt.emit("chat topic",this.topic)}}},St=Ot,Ct=Object(f["a"])(St,mt,vt,!1,null,null,null),Rt=Ct.exports,Et={data:function(){return{reviewToEdit:{txt:"",rating:null,aboutToyId:""},filterBy:{id:this.toyId}}},created:function(){this.$store.dispatch({type:"loadReviews",filterBy:this.filterBy})},methods:{addReview:function(){var e=this;return Object(Ce["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"addReview",review:e.reviewToEdit});case 2:e.reviewToEdit={txt:"",rating:null,aboutToyId:e.toyId};case 3:case"end":return t.stop()}}),t)})))()},removeReview:function(e){this.$store.dispatch({type:"removeReview",reviewId:e})}},watch:{toyId:{handler:function(){this.reviewToEdit.aboutToyId=this.toyId,this.filterBy.aboutToyId=this.toyId,this.$store.dispatch({type:"loadAndWatchToy",toyId:this.toyId})},immediate:!0}},computed:{reviews:function(){return this.$store.getters.reviews},toy:function(){return this.$store.getters.watchedToy},toyId:function(){return this.$route.params.toyId},user:function(){return this.$store.getters.user}},components:{reviewList:K,chat:Rt}},Pt=Et,It=Object(f["a"])(Pt,pt,ft,!1,null,null,null),Lt=It.exports,At=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"dashboard"},[e.pricePerToy?n("div",{staticClass:"price-chart"},[n("price-chart",{attrs:{pricePerToy:e.pricePerToy}})],1):e._e(),e.inventoryPerToy?n("div",{staticClass:"instock-chart"},[n("instock-chart",{attrs:{inventoryPerToy:e.inventoryPerToy}})],1):e._e()])},Ut=[],Nt=n("ade3"),Bt=n("3835"),Mt=(n("4fad"),n("b64b"),n("07ac"),n("1fca")),zt={props:["pricePerToy"],extends:Mt["b"],created:function(){for(var e=0,t=Object.entries(this.pricePerToy);e<t.length;e++){var n=Object(Bt["a"])(t[e],2),r=n[0],o=n[1];this.pricePerToy[r]=Math.floor(o.sum/o.count)}},mounted:function(){this.renderChart({labels:Object.keys(this.pricePerToy),datasets:[Object(Nt["a"])({label:"GitHub Commits",backgroundColor:"#f87979",data:Object.values(this.pricePerToy)},"backgroundColor",["#1b9ea2","#e64e69","#ff7722","#558596","#0055aa","#1b9ea2","#e64e69","#ff7722","#558596","#0055aa"])]})}},Ft=zt,Dt=Object(f["a"])(Ft,kt,xt,!1,null,null,null),qt=Dt.exports,Jt=(n("b680"),{props:["inventoryPerToy"],extends:Mt["a"],created:function(){for(var e=0,t=Object.entries(this.inventoryPerToy);e<t.length;e++){var n=Object(Bt["a"])(t[e],2),r=n[0],o=n[1];this.inventoryPerToy[r]=(o.stockCount/o.count*100).toFixed(2)}},mounted:function(){this.renderChart({labels:Object.keys(this.inventoryPerToy),datasets:[{label:"Toys in-stock",backgroundColor:["#1b9ea2","#e64e69","#ff7722","#558596","#0055aa"],data:Object.values(this.inventoryPerToy)}],options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}}),Gt=Jt,Wt=Object(f["a"])(Gt,Tt,$t,!1,null,null,null),Ht=Wt.exports,Vt={components:{priceChart:qt,instockChart:Ht},computed:{pricePerToy:function(){return this.$store.getters.filteredToys?this.$store.getters.filteredToys.reduce((function(e,t){return t.labels.forEach((function(n){return e[n]||(e[n]={count:0,sum:0}),e[n].sum+=+t.price,e[n].count++})),e}),{}):null},inventoryPerToy:function(){return this.$store.getters.filteredToys?this.$store.getters.filteredToys.reduce((function(e,t){return t.labels.forEach((function(n){return e[n]||(e[n]={count:0,stockCount:0}),t.inStock&&e[n].stockCount++,e[n].count++})),e}),{}):null}}},Qt=Vt,Yt=(n("99f1"),Object(f["a"])(Qt,At,Ut,!1,null,null,null)),Zt=Yt.exports,Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"about"},[n("h2",[e._v("Our MisterToy Branches")]),n("div",[n("g-map"),n("p",[e._v("Lorem ipsum dolor sit, amet consectetur adipisicing elit. Quidem magnam, ducimus, nam velit a placeat rem pariatur aperiam quibusdam voluptatibus debitis, quas exercitationem praesentium facilis?")])],1)])},Xt=[],en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"gmap"},[n("GmapMap",{ref:"mapRef",staticStyle:{width:"500px",height:"300px"},attrs:{center:e.center,zoom:7,"map-type-id":"terrain"}},e._l(e.markers,(function(t,r){return n("GmapMarker",{key:r,attrs:{position:t.position,clickable:!0,draggable:!0},on:{click:function(n){e.center=t.position}}})})),1),n("div",{staticClass:"branches-box"},e._l(e.markers,(function(t,r){return n("el-button",{key:r,on:{click:function(n){return e.moveTo(t.position)}}},[e._v(e._s(t.city))])})),1)],1)},tn=[],nn={data:function(){return{markers:[{city:"Haifa",position:{lat:32.8,lng:35}},{city:"Gaza",position:{lat:31.5,lng:34.5}},{city:"Eilat",position:{lat:29.55,lng:34.95}}],center:{lat:32.8,lng:35.2}}},created:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,r=n.latitude,o=n.longitude;e.center.lat=r,e.center.lng=o}))},methods:{moveTo:function(e){var t=e.lat,n=e.lng;this.$refs.mapRef.$mapPromise.then((function(e){e.panTo({lat:t,lng:n})}))}}},rn=nn,on=Object(f["a"])(rn,en,tn,!1,null,null,null),sn=on.exports,an={components:{gMap:sn}},un=an,cn=Object(f["a"])(un,Kt,Xt,!1,null,null,null),ln=cn.exports;r["default"].use(P["a"]);var dn=[{path:"/",name:"Home",component:B},{path:"/auth",component:O},{path:"/profile",component:ne},{path:"/toy",name:"Toys",component:$e,children:[{path:"edit/:toyId?",component:dt}]},{path:"/toy/:toyId",component:Lt},{path:"/dashboard",name:"Dashboard",component:Zt},{path:"/about",name:"About",component:ln}],pn=new P["a"]({mode:"history",base:"/",routes:dn}),fn=pn,mn=(n("25f0"),n("2f62")),vn=n("5530"),yn=(n("4e82"),n("bc3a")),hn="loggedinUser",gn={login:jn,logout:_n,signup:kn,getLoggedinUser:wn};bn();function bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="/auth";return"".concat(t,"/").concat(e)}function wn(){return JSON.parse(sessionStorage.getItem(hn))}function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"amnon",password:"123456a"};return Le.post("auth/login",e).then((function(e){return sessionStorage.setItem(hn,JSON.stringify(e)),e}))}function _n(){return Le.post("auth/logout").then((function(){return sessionStorage.setItem(hn,null),Promise.resolve()}))}function kn(e){return yn.post("auth/signup",e).then((function(e){return e.data})).then((function(e){return sessionStorage.setItem(hn,JSON.stringify(e)),e}))}window.userService=gn;var xn={state:{isLoading:!1,filterBy:{toyName:"",status:"all",labels:[],sortBy:""},watchedToy:null,toys:null,toyLabels:Ve.getLabels()},getters:{watchedToy:function(e){var t=e.watchedToy;return t},toyLabels:function(e){return e.toyLabels},filteredToys:function(e){var t=JSON.parse(JSON.stringify(e.toys)),n=e.filterBy.sortBy;if(n)switch(n){case"name":t=t.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:e.name<t.name?-1:0}));break;case"price":t=t.sort((function(e,t){return t.price-e.price}));break;case"created":t=t.sort((function(e,t){return e.createdAt-t.createdAt}))}return t},isLoading:function(e){var t=e.isLoading;return t}},mutations:{setWatchedToy:function(e,t){var n=t.toy;e.watchedToy=n},setLoading:function(e,t){var n=t.isLoading;e.isLoading=n},setToys:function(e,t){var n=t.toys;e.toys=n},addToy:function(e,t){var n=t.toy;e.toys.push(n)},updateToy:function(e,t){var n=t.toy,r=e.toys.findIndex((function(e){return e._id===n._id}));e.toys.splice(r,1,n)},removeToy:function(e,t){var n=t.toyId,r=e.toys.findIndex((function(e){return e._id===n}));e.toys.splice(r,1)},setFilter:function(e,t){var n=t.filterBy;e.filterBy=Object(vn["a"])({},n)}},actions:{loadAndWatchToy:function(e,t){return Object(Ce["a"])(regeneratorRuntime.mark((function n(){var r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=t.toyId,n.prev=2,n.next=5,Ve.getById(o);case 5:s=n.sent,r({type:"setWatchedToy",toy:s}),jt.emit(ht,o),jt.off(gt),jt.on(gt,(function(e){r({type:"setWatchedToy",toy:e})})),n.next=16;break;case 12:throw n.prev=12,n.t0=n["catch"](2),console.log("toyStore: Error in loadAndWatchToy",n.t0),n.t0;case 16:case"end":return n.stop()}}),n,null,[[2,12]])})))()},loadToys:function(e){var t=e.commit,n=e.state;t({type:"setLoading",isLoading:!0}),Ve.query(n.filterBy).then((function(e){t({type:"setToys",toys:e})})).finally((function(){t({type:"setLoading",isLoading:!1})}))},addToy:function(e,t){var n=e.commit,r=t.toy;return Ve.save(r).then((function(e){return n({type:"addToy",toy:e}),e}))},updateToy:function(e,t){var n=e.commit,r=t.toy;return Ve.save(r).then((function(e){return n({type:"updateToy",toy:e}),e}))},removeToy:function(e,t){var n=e.commit,r=t.toy;return Ve.remove(r._id).then((function(){n({type:"removeToy",toyId:r._id})}))},setFilter:function(e,t){var n=e.commit,r=e.dispatch,o=t.filterBy;n({type:"setFilter",filterBy:o}),r({type:"loadToys"})}}},Tn={state:{user:gn.getLoggedinUser()},getters:{user:function(e){return e.user},username:function(e){return e.user.username},isAdmin:function(e){return!!e.user&&e.user.isAdmin}},mutations:{login:function(e){e.user=gn.getLoggedinUser()},logout:function(e){e.user=null}},actions:{login:function(e,t){var n=e.commit,r=t.user;gn.login(r).then((function(e){n({type:"login"})}))},logout:function(e){var t=e.commit;gn.logout().then((function(){t({type:"logout"})}))},signup:function(e,t){var n=e.commit,r=t.user;gn.signup(r).then((function(){n({type:"login"})}))}}},$n={add:Cn,query:On,remove:Sn};function On(e){return Le.get("review",e)}function Sn(e){return Le.delete("review/".concat(e))}function Cn(e){return Rn.apply(this,arguments)}function Rn(){return Rn=Object(Ce["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le.post("review",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),Rn.apply(this,arguments)}Object(Ce["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Be.query("review");case 2:t=e.sent,window.addEventListener("storage",Object(Ce["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Storage updated"),e.next=3,Be.query("review");case 3:n=e.sent,n.length===t.length+1&&(console.log("Review Added - localStorage updated from another browser"),jt.emit(bt,n[n.length-1])),t=n;case 6:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})))();var En={state:{reviews:[]},getters:{reviews:function(e){return e.reviews}},mutations:{setReviews:function(e,t){var n=t.reviews;e.reviews=n},addReview:function(e,t){var n=t.review;e.reviews.push(n)},removeReview:function(e,t){var n=t.reviewId;e.reviews=e.reviews.filter((function(e){return e._id!==n}))}},actions:{addReview:function(e,t){return Object(Ce["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=t.review,n.prev=2,n.next=5,$n.add(o);case 5:return o=n.sent,r({type:"addReview",review:o}),n.abrupt("return",o);case 10:throw n.prev=10,n.t0=n["catch"](2),console.log("reviewStore: Error in addReview",n.t0),n.t0;case 14:case"end":return n.stop()}}),n,null,[[2,10]])})))()},loadReviews:function(e,t){return Object(Ce["a"])(regeneratorRuntime.mark((function n(){var r,o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=t.filterBy,s=void 0===o?{}:o,n.prev=2,n.next=5,$n.query(s);case 5:i=n.sent,r({type:"setReviews",reviews:i}),n.next=13;break;case 9:throw n.prev=9,n.t0=n["catch"](2),console.log("reviewStore: Error in loadReviews",n.t0),n.t0;case 13:case"end":return n.stop()}}),n,null,[[2,9]])})))()},removeReview:function(e,t){return Object(Ce["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=t.reviewId,n.prev=2,n.next=5,$n.remove(o);case 5:r({type:"removeReview",reviewId:o}),n.next=12;break;case 8:throw n.prev=8,n.t0=n["catch"](2),console.log("reviewStore: Error in removeReview",n.t0),n.t0;case 12:case"end":return n.stop()}}),n,null,[[2,8]])})))()}}};r["default"].use(mn["a"]);var Pn=new mn["a"].Store({strict:!0,state:{userMsg:null},getters:{userMsg:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return console.log(userMsg),e.userMsg}))},mutations:{setMsg:function(e,t){var n=t.userMsg;e.userMsg=n},clearMsg:function(e){e.userMsg=null}},actions:{},modules:{toyStore:xn,userStore:Tn,reviewStore:En}}),In=n("5c96"),Ln=n.n(In),An=(n("0fae"),n("755e"));n("3c61");r["default"].config.productionTip=!1,r["default"].use(Ln.a),r["default"].use(An,{load:{key:"AIzaSyC5N-qgV7qudjSjce4a8PEox5GnnCW1Sd8",libraries:"places"}}),new r["default"]({created:function(){this.$store.dispatch({type:"loadToys"})},router:fn,store:Pn,render:function(e){return e(E)}}).$mount("#app")},"84d0":function(e,t,n){},"87cd":function(e,t,n){"use strict";n("84d0")},"99f1":function(e,t,n){"use strict";n("5190")},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.9f3b7407.js.map